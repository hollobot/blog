# Vim 快捷操作大全

## 一、启动与退出

| 操作           | 命令            | 说明                     |
| -------------- | --------------- | ------------------------ |
| 打开文件       | `vim frps.toml` | 编辑指定文件             |
| 保存文件       | `:w`            | 保存，不退出             |
| 保存并退出     | `:wq` 或 `ZZ`   | 保存并退出               |
| 直接退出不保存 | `:q!`           | 放弃修改退出             |
| 退出           | `:q`            | 如果没有修改过，可以退出 |

------

## 二、模式切换（最重要）

Vim 有三个模式：

1. **普通模式（Normal）**：默认模式，浏览、复制、删除
2. **插入模式（Insert）**：输入文字
   - 进入：`i`（光标前插入）、`I`（行首插入）、`a`（光标后插入）、`A`（行尾插入）
   - 退出：`Esc` 回普通模式
3. **命令模式（Command）**：以 `:` 开头，用于保存、退出、搜索等

💡 **技巧**：编辑配置文件时，`i` → 改值，`Esc` → 保存/退出。

------

## 三、移动光标

| 快捷键 | 说明               |
| ------ | ------------------ |
| `h`    | 左移一个字符       |
| `l`    | 右移一个字符       |
| `j`    | 下移一行           |
| `k`    | 上移一行           |
| `0`    | 行首               |
| `^`    | 本行第一个非空字符 |
| `$`    | 行尾               |
| `gg`   | 文件首             |
| `G`    | 文件末             |

------

## 四、删除与修改

| 快捷键     | 说明                        |
| ---------- | --------------------------- |
| `x`        | 删除光标所在字符            |
| `dd`       | 删除整行                    |
| `d$`       | 删除光标到行尾              |
| `d0`       | 删除光标到行首              |
| `u`        | 撤销                        |
| `Ctrl + r` | 重做                        |
| `r<char>`  | 替换光标下的字符为 `<char>` |
| `cw`       | 删除当前单词并进入插入模式  |

------

## 五、复制与粘贴

| 快捷键       | 说明                       |
| ------------ | -------------------------- |
| `yy`         | 复制整行                   |
| `yw`         | 复制光标到单词结尾         |
| `p`          | 粘贴到光标后               |
| `P`          | 粘贴到光标前               |
| `:set paste` | 粘贴模式（防止自动缩进乱） |

------

## 六、查找与替换

| 快捷键          | 说明                     |
| --------------- | ------------------------ |
| `/text`         | 向下搜索 `text`          |
| `?text`         | 向上搜索 `text`          |
| `n`             | 跳到下一个匹配           |
| `N`             | 跳到上一个匹配           |
| `:%s/old/new/g` | 全文件替换 `old` → `new` |
| `:s/old/new/g`  | 当前行替换 `old` → `new` |

💡 **小技巧**：

- 编辑 `frps.toml` 的 token 或端口时，全局替换非常好用：

  ```
  :%s/15253/15260/g
  ```

------

## 七、缩进与对齐

| 快捷键 | 说明               |
| ------ | ------------------ |
| `>>`   | 当前行右移一级缩进 |
| `<<`   | 当前行左移一级缩进 |
| `=`    | 自动缩进当前行     |
| `gg=G` | 自动缩进整个文件   |

💡 编辑 toml 配置文件时，用 `gg=G` 可以快速美化文件结构。

------

## 八、分屏 / 多文件（进阶）

| 快捷键               | 说明             |
| -------------------- | ---------------- |
| `:e file`            | 打开新文件       |
| `:vsp file`          | 垂直分屏打开文件 |
| `:sp file`           | 水平分屏打开文件 |
| `Ctrl + w + h/j/k/l` | 在分屏间切换     |

------

## 九、实用组合（编辑配置必备）

1. **快速改端口**：

```
/%s/old_port/new_port/g
```

1. **修改 token**：

```
/%s/OLD_TOKEN/NEW_TOKEN/g
```

1. **快速保存退出**：

```
ZZ
```

1. **撤销一大段误操作**：

```
u  (多次按)
```

1. **防止粘贴乱缩进**：

```
:set paste
# 粘贴后
:set nopaste
```

------

💡 **小结**

- 配置文件改值：`i` → 改 → `Esc`
- 快速复制 / 删除 / 替换 → `yy` / `dd` / `:%s/old/new/g`
- 后台退出、查看日志 → 用 shell，不影响 Vim