# è§‚å¯Ÿè€…æ¨¡å¼

è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡é—´çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šè‡ªåŠ¨æ”¶åˆ°é€šçŸ¥å¹¶æ›´æ–°ã€‚



## æ ¸å¿ƒæ¦‚å¿µ

- **ä¸»é¢˜ï¼ˆSubjectï¼‰**ï¼šè¢«è§‚å¯Ÿçš„å¯¹è±¡ï¼ŒçŠ¶æ€æ”¹å˜æ—¶é€šçŸ¥è§‚å¯Ÿè€…
- **è§‚å¯Ÿè€…ï¼ˆObserverï¼‰**ï¼šç›‘å¬ä¸»é¢˜çŠ¶æ€å˜åŒ–çš„å¯¹è±¡
- **é€šçŸ¥æœºåˆ¶**ï¼šä¸»é¢˜ç»´æŠ¤è§‚å¯Ÿè€…åˆ—è¡¨ï¼ŒçŠ¶æ€æ”¹å˜æ—¶éå†é€šçŸ¥



## è§‚å¯Ÿè€…æ¥å£

```java
interface Observer {
    void update(String weather, int temperature);
}
```



## ä¸»é¢˜æ¥å£

```java
interface Subject {
    void addObserver(Observer observer);      // æ·»åŠ è§‚å¯Ÿè€…
    void removeObserver(Observer observer);   // ç§»é™¤è§‚å¯Ÿè€…
    void notifyObservers();                   // é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
}
```



## ä¸»é¢˜å®ç°ç±»

```java
// å…·ä½“ä¸»é¢˜ï¼šå¤©æ°”ç«™
class WeatherStation implements Subject {
    private List<Observer> observers;  // è§‚å¯Ÿè€…åˆ—è¡¨
    private String weather;           // å¤©æ°”çŠ¶å†µ
    private int temperature;          // æ¸©åº¦
    
    public WeatherStation() {
        this.observers = new ArrayList<>();
    }
    
    // æ·»åŠ è§‚å¯Ÿè€…
    @Override
    public void addObserver(Observer observer) {
        observers.add(observer);
        System.out.println("æ–°è§‚å¯Ÿè€…å·²æ·»åŠ ï¼Œå½“å‰è§‚å¯Ÿè€…æ•°é‡: " + observers.size());
    }
    
    // ç§»é™¤è§‚å¯Ÿè€…
    @Override
    public void removeObserver(Observer observer) {
        observers.remove(observer);
        System.out.println("è§‚å¯Ÿè€…å·²ç§»é™¤ï¼Œå½“å‰è§‚å¯Ÿè€…æ•°é‡: " + observers.size());
    }
    
    // é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
    @Override
    public void notifyObservers() {
        System.out.println("\nğŸ“¢ å¤©æ°”ç«™å¹¿æ’­ï¼šå¤©æ°”æ›´æ–°ï¼");
        for (Observer observer : observers) {
            observer.update(weather, temperature);
        }
        System.out.println("é€šçŸ¥å®Œæˆ âœ…\n");
    }
    
    // è®¾ç½®å¤©æ°”æ•°æ®ï¼ˆçŠ¶æ€æ”¹å˜ï¼‰
    public void setWeatherData(String weather, int temperature) {
        System.out.println("ğŸŒ¤ï¸ å¤©æ°”ç«™æ£€æµ‹åˆ°å¤©æ°”å˜åŒ–...");
        this.weather = weather;
        this.temperature = temperature;
        notifyObservers(); // çŠ¶æ€æ”¹å˜ï¼Œé€šçŸ¥è§‚å¯Ÿè€…
    }
    
    // è·å–å½“å‰å¤©æ°”
    public String getCurrentWeather() {
        return weather + ", " + temperature + "Â°C";
    }
}

```



## è§‚å¯Ÿè€…å®ç°ç±»

```java
// å…·ä½“è§‚å¯Ÿè€…1ï¼šæ‰‹æœºApp
class PhoneApp implements Observer {
    private String name;
    
    public PhoneApp(String name) {
        this.name = name;
    }
    
    @Override
    public void update(String weather, int temperature) {
        System.out.println("ğŸ“± " + name + " æ”¶åˆ°å¤©æ°”æ›´æ–°:");
        System.out.println("   å¤©æ°”: " + weather + " | æ¸©åº¦: " + temperature + "Â°C");
        
        // æ ¹æ®å¤©æ°”ç»™å‡ºå»ºè®®
        if (temperature > 30) {
            System.out.println("   ğŸ’¡ å»ºè®®: å¤©æ°”ç‚çƒ­ï¼Œæ³¨æ„é˜²æš‘é™æ¸©ï¼");
        } else if (temperature < 10) {
            System.out.println("   ğŸ’¡ å»ºè®®: å¤©æ°”å¯’å†·ï¼Œè®°å¾—æ·»åŠ è¡£ç‰©ï¼");
        } else {
            System.out.println("   ğŸ’¡ å»ºè®®: å¤©æ°”å®œäººï¼Œé€‚åˆå¤–å‡ºæ´»åŠ¨ï¼");
        }
    }
}

// å…·ä½“è§‚å¯Ÿè€…2ï¼šç”µè§†å°
class TVStation implements Observer {
    private String channelName;
    
    public TVStation(String channelName) {
        this.channelName = channelName;
    }
    
    @Override
    public void update(String weather, int temperature) {
        System.out.println("ğŸ“º " + channelName + " æ’­æŠ¥å¤©æ°”:");
        System.out.println("   ç°åœ¨ä¸ºæ‚¨æ’­æŠ¥æœ€æ–°å¤©æ°”æƒ…å†µ");
        System.out.println("   å½“å‰å¤©æ°”: " + weather + "ï¼Œæ°”æ¸©: " + temperature + "Â°C");
        System.out.println("   è¯·è§‚ä¼—æœ‹å‹ä»¬å…³æ³¨å¤©æ°”å˜åŒ–ï¼Œåˆç†å®‰æ’å‡ºè¡Œ");
    }
}
```



## æµ‹è¯•

```java
public class Main {
    public static void main(String[] args) {
        WeatherStation weatherStation = new WeatherStation();

        // åˆ›å»ºè§‚å¯Ÿè€…
        PhoneApp phoneApp = new PhoneApp("å¼ ä¸‰");
        TVStation tVStation = new TVStation("ä¸­å¤®ç”µè§†å°");

        // æ³¨å†Œè§‚å¯Ÿè€…
        weatherStation.addObserver(phoneApp);
        weatherStation.addObserver(tVStation);

        // è®¾ç½®å¤©æ°”ä¿¡æ¯
        weatherStation.setWeatherData("æ™´å¤©", 25);

        // é€šçŸ¥è§‚å¯Ÿè€…
        weatherStation.notifyObservers();

    }
}
```



## è¾“å‡º

```powershell
æ–°è§‚å¯Ÿè€…å·²æ·»åŠ ï¼Œå½“å‰è§‚å¯Ÿè€…æ•°é‡: 1
æ–°è§‚å¯Ÿè€…å·²æ·»åŠ ï¼Œå½“å‰è§‚å¯Ÿè€…æ•°é‡: 2
ğŸŒ¤ï¸ å¤©æ°”ç«™æ£€æµ‹åˆ°å¤©æ°”å˜åŒ–...

ğŸ“¢ å¤©æ°”ç«™å¹¿æ’­ï¼šå¤©æ°”æ›´æ–°ï¼
ğŸ“± å¼ ä¸‰ æ”¶åˆ°å¤©æ°”æ›´æ–°:
   å¤©æ°”: æ™´å¤© | æ¸©åº¦: 25Â°C
   ğŸ’¡ å»ºè®®: å¤©æ°”å®œäººï¼Œé€‚åˆå¤–å‡ºæ´»åŠ¨ï¼
ğŸ“º ä¸­å¤®ç”µè§†å° æ’­æŠ¥å¤©æ°”:
   ç°åœ¨ä¸ºæ‚¨æ’­æŠ¥æœ€æ–°å¤©æ°”æƒ…å†µ
   å½“å‰å¤©æ°”: æ™´å¤©ï¼Œæ°”æ¸©: 25Â°C
   è¯·è§‚ä¼—æœ‹å‹ä»¬å…³æ³¨å¤©æ°”å˜åŒ–ï¼Œåˆç†å®‰æ’å‡ºè¡Œ
é€šçŸ¥å®Œæˆ âœ…


ğŸ“¢ å¤©æ°”ç«™å¹¿æ’­ï¼šå¤©æ°”æ›´æ–°ï¼
ğŸ“± å¼ ä¸‰ æ”¶åˆ°å¤©æ°”æ›´æ–°:
   å¤©æ°”: æ™´å¤© | æ¸©åº¦: 25Â°C
   ğŸ’¡ å»ºè®®: å¤©æ°”å®œäººï¼Œé€‚åˆå¤–å‡ºæ´»åŠ¨ï¼
ğŸ“º ä¸­å¤®ç”µè§†å° æ’­æŠ¥å¤©æ°”:
   ç°åœ¨ä¸ºæ‚¨æ’­æŠ¥æœ€æ–°å¤©æ°”æƒ…å†µ
   å½“å‰å¤©æ°”: æ™´å¤©ï¼Œæ°”æ¸©: 25Â°C
   è¯·è§‚ä¼—æœ‹å‹ä»¬å…³æ³¨å¤©æ°”å˜åŒ–ï¼Œåˆç†å®‰æ’å‡ºè¡Œ
é€šçŸ¥å®Œæˆ âœ…
```

